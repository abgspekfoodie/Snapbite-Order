<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snapbite‚Ñ¢ Live Order</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #121212;
      color: #f0f0f0;
      padding: 2rem;
      max-width: 650px;
      margin: auto;
    }
    h1 {
      color: #ff9500;
      text-align: center;
      font-size: 2.2rem;
      margin-bottom: 1.2rem;
    }
    .closed-msg {
      text-align: center;
      background: #1e1e1e;
      border: 1px solid #ff6b6b;
      padding: 30px;
      border-radius: 16px;
      color: #ff6b6b;
      font-size: 1.1rem;
      line-height: 1.6;
      box-shadow: 0 0 15px rgba(255, 107, 107, 0.1);
    }
    .closed-msg em {
      display: block;
      margin-top: 15px;
      color: #ff9999;
      font-style: italic;
    }
    .highlight {
      color: #ffaa00;
      font-weight: bold;
    }
    form label, form input, form select, form textarea, .summary {
      display: block;
      width: 100%;
      margin-top: 1rem;
      font-size: 1rem;
    }
    input, select, textarea {
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: #1e1e1e;
      color: #fff;
    }
    .menu-block {
      background: #1e1e1e;
      padding: 1rem;
      margin-top: 1.5rem;
      border-radius: 12px;
    }
    .summary {
      background: #222;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 25px;
    }
    button {
      width: 100%;
      padding: 1rem;
      border-radius: 10px;
      border: none;
      margin-top: 1rem;
      font-weight: bold;
      font-size: 1rem;
    }
    .add-menu-btn { background: #0a84ff; color: #fff; }
    .submit-btn { background: #ff9500; color: #000; }
  </style>
</head>
<body>
  <h1>Snapbite‚Ñ¢ Live Order</h1>  <div id="closedMsg" class="closed-msg" style="display: none;">
    üîí <span class="highlight">Snapbite‚Ñ¢ is clocked out for the day.</span><br><br>
    No sizzle, no flip, no juicy display. üçîüî•<br>
    We're recharging the taste, giving dreams some play.<br><br>
    But don‚Äôt you worry ‚Äî we‚Äôre not far away.<br>
    <em>üí¨ Stay tuned, stay hype, we‚Äôll be back your way!</em>
  </div>  <form id="orderForm" style="display: none;">
    <label for="custName">Name</label>
    <input type="text" id="custName" required placeholder="Your name" /><label for="custPhone">Phone</label>
<input type="tel" id="custPhone" required placeholder="Your phone number" pattern="[0-9+]+" />

<div id="menuContainer"></div>

<button type="button" class="add-menu-btn" onclick="addMenu()">+ Add Menu Item</button>

<label for="notes">Notes</label>
<textarea id="notes" rows="3" placeholder="Extra instructions (optional)"></textarea>

<div class="summary">
  <strong>Total: RM <span id="total">0.00</span></strong>
</div>

<button type="submit" class="submit-btn">Submit Order</button>

  </form>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB_gnrfNMlJaNu6zSZqX7eiXzbZrnmtA2M",
      authDomain: "snapbite-admin.firebaseapp.com",
      databaseURL: "https://snapbite-admin-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "snapbite-admin",
      storageBucket: "snapbite-admin.appspot.com",
      messagingSenderId: "146625734660",
      appId: "1:146625734660:web:23ada593e4818ed7332d51"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const menuData = {
      "Beef": [
        { id: "primebite", name: "Primebite‚Ñ¢", price: 10 },
        { id: "beefncheese", name: "Beef N‚Äô Cheese‚Ñ¢", price: 11 },
        { id: "thefunguy", name: "The Fun Guy‚Ñ¢", price: 13 },
        { id: "thefixer", name: "The Fixer‚Ñ¢", price: 15 }
      ],
      "Chicken": [
        { id: "chickbite", name: "Chickbite‚Ñ¢", price: 9 },
        { id: "goldcut", name: "Goldcut‚Ñ¢", price: 10 },
        { id: "thecapcut", name: "The Cap Cut‚Ñ¢", price: 11 },
        { id: "stripstack", name: "Stripstack‚Ñ¢", price: 14 }
      ],
      "Tex-Mex": [
        { id: "smokebeeftaco", name: "Smoke Beef Taco‚Ñ¢", price: 10 },
        { id: "smokeychickentaco", name: "Smokey Chicken Taco‚Ñ¢", price: 9 },
        { id: "mixtaco", name: "Mix Taco‚Ñ¢", price: 12 },
        { id: "smokebeequesadilla", name: "Smoke Beef Quesadilla‚Ñ¢", price: 15 },
        { id: "smokechickenquesadilla", name: "Smoke Chicken Quesadilla‚Ñ¢", price: 14 },
        { id: "mixquesadilla", name: "Mix Quesadilla‚Ñ¢", price: 16 }
      ],
      "Sausage": [
        { id: "classicsausage", name: "Classic Sausage‚Ñ¢", price: 6 },
        { id: "loadedsausage", name: "Loaded Sausage‚Ñ¢", price: 12 }
      ],
      "Snack": [
        { id: "popcornchicken", name: "Popcorn Chicken‚Ñ¢", price: 7 }
      ]
    };

    const addonsData = [
      { label: "Cheese", price: 2 },
      { label: "Egg", price: 1 },
      { label: "Bacon", price: 3 }
    ];

    const saucesData = ["Nancho Cheese", "Snapbite Special", "Redriot", "Garlic Ranch"];

    let menuCount = 0;
    function addMenu() {
      const container = document.getElementById("menuContainer");
      const block = document.createElement("div");
      block.className = "menu-block";
      block.dataset.id = menuCount;

      let html = `<label>Category</label><select class="category" onchange="onCategoryChange(this)" required><option value="">-- Select Category --</option>`;
      Object.keys(menuData).forEach(cat => html += `<option value="${cat}">${cat}</option>`);
      html += `</select>`;

      html += `<label>Menu Item</label><select class="menu" disabled required><option value="">-- Select Item --</option></select>`;
      html += `<label>Quantity</label><input type="number" class="qty" value="1" min="1" onchange="updateTotal()">`;

      html += `<label>Add-ons</label>`;
      addonsData.forEach(add => {
        html += `<label><input type="checkbox" class="addon" data-price="${add.price}" onchange="updateTotal()"> ${add.label} (RM${add.price})</label>`;
      });

      html += `<label>Sauces (Pick up to 2)</label>`;
      saucesData.forEach(s => {
        html += `<label><input type="checkbox" class="sauce" onchange="updateTotal()"> ${s}</label>`;
      });

      block.innerHTML = html;
      container.appendChild(block);
      menuCount++;
    }

    function onCategoryChange(select) {
      const cat = select.value;
      const block = select.closest(".menu-block");
      const menuSelect = block.querySelector(".menu");
      menuSelect.innerHTML = `<option value="">-- Select Item --</option>`;
      menuSelect.disabled = !cat;
      if (cat) {
        menuData[cat].forEach(item => {
          menuSelect.innerHTML += `<option value="${item.name}" data-price="${item.price}">${item.name} (RM${item.price})</option>`;
        });
      }
      updateTotal();
    }

    function updateTotal() {
      let total = 0;
      document.querySelectorAll(".menu-block").forEach(block => {
        const menu = block.querySelector(".menu");
        const qty = parseInt(block.querySelector(".qty").value || 1);
        if (!menu || !menu.value) return;
        const price = parseFloat(menu.options[menu.selectedIndex].dataset.price);
        let addonTotal = 0;
        block.querySelectorAll(".addon:checked").forEach(cb => addonTotal += parseFloat(cb.dataset.price));
        total += (price + addonTotal) * qty;
      });
      document.getElementById("total").textContent = total.toFixed(2);
    }

    db.ref("settings/offday").on("value", snap => {
      const isOff = snap.val() === true;
      document.getElementById("orderForm").style.display = isOff ? "none" : "block";
      document.getElementById("closedMsg").style.display = isOff ? "block" : "none";
    });
  </script></body>
</html>
